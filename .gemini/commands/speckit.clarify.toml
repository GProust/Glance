description = "Resolve [NEEDS CLARIFICATION] markers in the feature specification by processing user answers."

prompt = '''
---
description: Resolve [NEEDS CLARIFICATION] markers in the feature specification by processing user answers.
handoffs: 
  - label: Build Technical Plan
    agent: speckit.plan
    prompt: Create a plan for the spec. I am building with...
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Outline

1. **Setup**: Run `.specify/scripts/pwsh/check-prerequisites.ps1 -Json` from repo root and parse FEATURE_DIR and AVAILABLE_DOCS list. All paths must be absolute.

2. **Load specification**: Read spec.md from FEATURE_DIR.

3. **Identify clarifications**: Find all `[NEEDS CLARIFICATION: ...]` markers.

4. **Process user input**:
   - Match user's answers in $ARGUMENTS to the markers.
   - For single quotes in args like "I'm Groot", use escape syntax: e.g 'I'\\''m Groot' (or double-quote if possible: "I'm Groot").

5. **Update specification**:
   - Replace each marker with the resolved answer.
   - Remove the `[NEEDS CLARIFICATION]` tag.
   - Update any dependent sections (Requirements, Scenarios) as needed based on the new information.

6. **Validate**: Ensure no markers remain and the spec is internally consistent.

7. **Report**: Confirm markers resolved and spec updated. Suggest next step (`/speckit.plan`).
'''
